Version 4
SHEET 1 3780 2884
WIRE 1104 -832 1072 -832
WIRE 1136 -832 1104 -832
WIRE 1264 -832 1232 -832
WIRE 1296 -832 1264 -832
WIRE 1072 -784 1072 -832
WIRE 1232 -784 1232 -832
WIRE 1072 -656 1072 -704
WIRE 1232 -656 1232 -704
WIRE 1024 -592 960 -592
WIRE 1104 -592 1072 -592
WIRE 1136 -592 1104 -592
WIRE 1264 -592 1232 -592
WIRE 1296 -592 1264 -592
WIRE 1072 -544 1072 -592
WIRE 1232 -544 1232 -592
WIRE 1072 -416 1072 -464
WIRE 1232 -416 1232 -464
WIRE -1792 80 -1920 80
WIRE -1600 80 -1728 80
WIRE -1264 96 -1264 64
WIRE -1264 96 -1376 96
WIRE -1152 96 -1264 96
WIRE -1376 160 -1376 96
WIRE -1152 160 -1152 96
WIRE -1776 224 -1808 224
WIRE -1712 224 -1776 224
WIRE -832 224 -896 224
WIRE -800 224 -832 224
WIRE -1712 272 -1712 224
WIRE -896 272 -896 224
WIRE -1600 288 -1600 80
WIRE -1600 288 -1680 288
WIRE -1504 288 -1600 288
WIRE -1376 288 -1376 240
WIRE -1376 288 -1424 288
WIRE -928 288 -1376 288
WIRE -1920 304 -1920 80
WIRE -1872 304 -1920 304
WIRE -1744 304 -1872 304
WIRE -704 304 -864 304
WIRE -1648 320 -1680 320
WIRE -1600 320 -1600 288
WIRE -1504 320 -1600 320
WIRE -1152 320 -1152 240
WIRE -1152 320 -1424 320
WIRE -928 320 -1152 320
WIRE 880 336 720 336
WIRE 1024 336 944 336
WIRE 1056 336 1024 336
WIRE -1376 352 -1376 288
WIRE -1152 352 -1152 320
WIRE -1776 368 -1808 368
WIRE -1712 368 -1712 336
WIRE -1712 368 -1776 368
WIRE -896 368 -896 336
WIRE -832 368 -896 368
WIRE -800 368 -832 368
WIRE 1056 368 1056 336
WIRE -2416 400 -2480 400
WIRE -2256 400 -2336 400
WIRE -2096 400 -2192 400
WIRE -2000 400 -2096 400
WIRE -1856 400 -2000 400
WIRE -1440 400 -1856 400
WIRE -1040 400 -1088 400
WIRE -992 400 -1040 400
WIRE -704 400 -704 304
WIRE -704 400 -912 400
WIRE -2096 432 -2096 400
WIRE -2000 432 -2000 400
WIRE -2480 448 -2480 400
WIRE -1856 464 -1856 400
WIRE -1648 464 -1648 320
WIRE -1584 464 -1648 464
WIRE -1456 464 -1504 464
WIRE -1040 480 -1040 400
WIRE -944 480 -1040 480
WIRE -704 480 -704 400
WIRE -704 480 -880 480
WIRE -640 480 -704 480
WIRE -336 480 -448 480
WIRE -160 480 -272 480
WIRE -128 480 -160 480
WIRE 1056 480 1056 432
WIRE -1648 512 -1648 464
WIRE -1584 512 -1648 512
WIRE -1456 512 -1504 512
WIRE -1376 512 -1376 448
WIRE -1264 512 -1376 512
WIRE -1152 512 -1152 448
WIRE -1152 512 -1264 512
WIRE -1040 512 -1040 480
WIRE -2096 528 -2096 496
WIRE -2000 528 -2000 496
WIRE -1376 528 -1376 512
WIRE -448 528 -448 480
WIRE -128 528 -128 480
WIRE 720 528 720 336
WIRE 880 528 720 528
WIRE 1024 528 944 528
WIRE 1056 528 1024 528
WIRE 1056 544 1056 528
WIRE -1456 560 -1456 512
WIRE -1264 576 -1264 512
WIRE 1904 576 1904 544
WIRE -2480 608 -2480 528
WIRE 1248 608 1248 512
WIRE -2096 624 -2096 592
WIRE -2000 624 -2000 592
WIRE -1856 624 -1856 544
WIRE -1600 624 -1648 624
WIRE -1376 624 -1376 608
WIRE -1376 624 -1600 624
WIRE -1328 624 -1376 624
WIRE 720 624 720 528
WIRE -1040 640 -1040 592
WIRE -448 656 -448 608
WIRE -128 656 -128 608
WIRE 1056 656 1056 608
WIRE 1248 720 1248 688
WIRE 720 736 720 704
WIRE 1904 736 1904 656
WIRE -1264 832 -1264 672
WIRE 1904 832 1904 800
WIRE 1904 928 1904 896
WIRE -1152 1088 -1152 1056
WIRE -1152 1088 -1264 1088
WIRE -1040 1088 -1152 1088
WIRE -1264 1152 -1264 1088
WIRE -1040 1152 -1040 1088
WIRE -720 1216 -784 1216
WIRE -688 1216 -720 1216
WIRE -784 1264 -784 1216
WIRE -1264 1280 -1264 1232
WIRE -816 1280 -1264 1280
WIRE -592 1296 -752 1296
WIRE -1040 1312 -1040 1232
WIRE -1040 1312 -1312 1312
WIRE -816 1312 -1040 1312
WIRE -1264 1344 -1264 1280
WIRE -1040 1344 -1040 1312
WIRE -784 1360 -784 1328
WIRE -720 1360 -784 1360
WIRE -688 1360 -720 1360
WIRE -2304 1392 -2368 1392
WIRE -2144 1392 -2224 1392
WIRE -1984 1392 -2080 1392
WIRE -1888 1392 -1984 1392
WIRE -1744 1392 -1888 1392
WIRE -1328 1392 -1744 1392
WIRE -928 1392 -976 1392
WIRE -880 1392 -928 1392
WIRE -592 1392 -592 1296
WIRE -592 1392 -800 1392
WIRE -1984 1424 -1984 1392
WIRE -1888 1424 -1888 1392
WIRE -2368 1440 -2368 1392
WIRE -1744 1456 -1744 1392
WIRE -928 1472 -928 1392
WIRE -832 1472 -928 1472
WIRE -592 1472 -592 1392
WIRE -592 1472 -768 1472
WIRE -1264 1504 -1264 1440
WIRE -1152 1504 -1264 1504
WIRE -1040 1504 -1040 1440
WIRE -1040 1504 -1152 1504
WIRE -928 1504 -928 1472
WIRE -1984 1520 -1984 1488
WIRE -1888 1520 -1888 1488
WIRE -1264 1520 -1264 1504
WIRE -1152 1568 -1152 1504
WIRE -2368 1600 -2368 1520
WIRE -1984 1616 -1984 1584
WIRE -1888 1616 -1888 1584
WIRE -1744 1616 -1744 1536
WIRE -1264 1616 -1264 1600
WIRE -1216 1616 -1264 1616
WIRE -928 1632 -928 1584
WIRE -1264 1664 -1264 1616
WIRE -1264 1792 -1264 1744
WIRE -1152 1792 -1152 1664
WIRE -1152 1792 -1264 1792
WIRE -1152 1824 -1152 1792
FLAG 1104 -592 12V
FLAG 1264 -592 -15V
FLAG 1232 -416 0
FLAG 1072 -416 0
FLAG -1264 64 5V
FLAG -1856 624 0
FLAG 1104 -832 5V
FLAG 1264 -832 -5V
FLAG 1232 -656 0
FLAG 1072 -656 0
FLAG -832 224 5V
FLAG -832 368 -5V
FLAG -2480 608 0
FLAG -2000 624 0
FLAG -2096 624 0
FLAG -1040 640 0
FLAG -448 656 0
FLAG -128 656 0
FLAG -1264 832 -5V
FLAG 1904 928 -5V
FLAG 1904 544 12V
FLAG -640 480 20x_OUTPUT
IOPIN -640 480 Out
FLAG 720 736 0
FLAG 1056 480 0
FLAG 1056 656 0
FLAG 1024 336 max_1
FLAG 1024 528 min_1
FLAG 1248 720 0
FLAG -160 480 out_1
FLAG -1776 224 5V
FLAG -1776 368 -5V
FLAG -1456 560 0
FLAG -1456 464 5V
FLAG -1872 304 base
FLAG -1600 624 base
FLAG -1152 1056 5V
FLAG -1744 1616 0
FLAG -720 1216 5V
FLAG -720 1360 -5V
FLAG -2368 1600 0
FLAG -1888 1616 0
FLAG -1984 1616 0
FLAG -928 1632 0
FLAG -1152 1824 -5V
SYMBOL voltage 1072 -560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage 1232 -560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -15
SYMBOL voltage -2480 432 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value SINE(0 0.02m {f})
SYMBOL res -1392 144 R0
SYMATTR InstName R10
SYMATTR Value {Rc}
SYMBOL res -1136 144 M0
SYMATTR InstName R11
SYMATTR Value {Rc}
SYMBOL cap -2192 384 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL res -2320 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 50
SYMBOL res -1872 448 R0
SYMATTR InstName R15
SYMATTR Value 50
SYMBOL res -896 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 200
SYMBOL res -1056 496 R0
SYMATTR InstName R25
SYMATTR Value 10
SYMBOL cap -880 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 5p
SYMBOL npn -1440 352 R0
SYMATTR InstName Q5
SYMATTR Value 2N4401
SYMBOL npn -1088 352 M0
SYMATTR InstName Q6
SYMATTR Value 2N4401
SYMBOL voltage 1232 -800 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -5
SYMBOL voltage 1072 -800 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL diode -2016 528 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -2016 432 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode -2080 496 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode -2080 592 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL bv -448 512 R0
SYMATTR InstName B1
SYMATTR Value V=V(20x_OUTPUT)
SYMBOL cap -272 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 10000
SYMBOL res -144 512 R0
SYMATTR InstName R3
SYMATTR Value 1m
SYMBOL diode 1920 832 M0
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode 1920 736 M0
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL res 1920 560 M0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL ZZZ\\OpAmp\\AD8009an -896 304 R0
SYMATTR InstName U1
SYMBOL bv 720 608 R0
SYMATTR InstName B2
SYMATTR Value V=V(out_1)
SYMBOL diode 880 352 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value MyIdealDiode
SYMBOL cap 1040 368 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL diode 944 512 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMATTR Value MyIdealDiode
SYMBOL cap 1040 544 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL bv 1248 592 R0
SYMATTR InstName B3
SYMATTR Value V=V(max_1) - V(min_1)
SYMBOL ZZZ\\OpAmp\\TL072 -1712 304 M0
SYMATTR InstName U4
SYMBOL res -1520 304 R270
WINDOW 0 20 12 VTop 2
WINDOW 3 47 100 VBottom 2
SYMATTR InstName R7
SYMATTR Value 1Meg
SYMBOL res -1520 336 R270
WINDOW 0 -15 13 VTop 2
WINDOW 3 6 109 VBottom 2
SYMATTR InstName R8
SYMATTR Value 1Meg
SYMBOL cap -1728 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 51p
SYMBOL res -1600 480 R270
WINDOW 0 20 12 VTop 2
WINDOW 3 47 100 VBottom 2
SYMATTR InstName R9
SYMATTR Value 50k
SYMBOL res -1600 528 R270
WINDOW 0 -15 13 VTop 2
WINDOW 3 6 109 VBottom 2
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL pnp -1328 672 M180
SYMATTR InstName Q1
SYMATTR Value 2N2905
SYMBOL res -1392 512 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL voltage -2368 1424 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0 0.02m {f})
SYMBOL res -1280 1136 R0
SYMATTR InstName R1
SYMATTR Value {Rc}
SYMBOL res -1024 1136 M0
SYMATTR InstName R5
SYMATTR Value {Rc}
SYMBOL cap -2080 1376 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL res -2208 1376 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 50
SYMBOL res -1760 1440 R0
SYMATTR InstName R13
SYMATTR Value 50
SYMBOL res -784 1376 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 200
SYMBOL res -944 1488 R0
SYMATTR InstName R17
SYMATTR Value 10
SYMBOL cap -768 1456 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 5p
SYMBOL npn -1328 1344 R0
SYMATTR InstName Q2
SYMATTR Value 2N4401
SYMBOL npn -976 1344 M0
SYMATTR InstName Q3
SYMATTR Value 2N4401
SYMBOL diode -1904 1520 R0
SYMATTR InstName D9
SYMATTR Value 1N4148
SYMBOL diode -1904 1424 R0
SYMATTR InstName D10
SYMATTR Value 1N4148
SYMBOL diode -1968 1488 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D11
SYMATTR Value 1N4148
SYMBOL diode -1968 1584 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D12
SYMATTR Value 1N4148
SYMBOL ZZZ\\OpAmp\\AD8009an -784 1296 R0
SYMATTR InstName U2
SYMBOL pnp -1216 1664 M180
SYMATTR InstName Q4
SYMATTR Value 2N2905
SYMBOL res -1280 1648 R0
SYMATTR InstName R18
SYMATTR Value 610k
TEXT 392 1056 Left 2 !.lib Z:\\home\\ostoja\\Elektronika\\LNWBA\\LSK389B.lib
TEXT 192 1184 Left 2 !.tran 0 200u 0 10n
TEXT 392 1080 Left 2 !.lib Z:\\home\\ostoja\\Elektronika\\LNWBA\\lm7171.lib
TEXT 392 1104 Left 2 !.lib Z:\\home\\ostoja\\Elektronika\\LNWBA\\LM6171A.MOD
TEXT 560 -544 Left 2 !.param Trim = 100
TEXT -832 248 Left 2 ;40x
TEXT -1488 376 Left 2 ;0.5x
TEXT 208 1216 Left 2 !;.step param f list 100k 1Meg 5Meg 9Meg 13Meg 17Meg 21Meg 25Meg
TEXT 672 232 Left 2 !.ic V(m1) = 0
TEXT 664 200 Left 2 !.model MyIdealDiode D(Ron=1 Roff=100Meg Vfwd=0 Vrev=20)
TEXT -1136 120 Left 2 !.param Rc = 2k2
TEXT 24 1008 Left 2 !.param f = 20Meg
TEXT -1616 480 Left 2 ;pot
TEXT -720 1240 Left 2 ;40x
TEXT -1376 1368 Left 2 ;0.5x
