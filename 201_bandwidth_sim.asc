Version 4
SHEET 1 3780 2884
WIRE 1104 -832 1072 -832
WIRE 1136 -832 1104 -832
WIRE 1264 -832 1232 -832
WIRE 1296 -832 1264 -832
WIRE 1072 -784 1072 -832
WIRE 1232 -784 1232 -832
WIRE 1072 -656 1072 -704
WIRE 1232 -656 1232 -704
WIRE 1024 -592 960 -592
WIRE 1104 -592 1072 -592
WIRE 1136 -592 1104 -592
WIRE 1264 -592 1232 -592
WIRE 1296 -592 1264 -592
WIRE 1072 -544 1072 -592
WIRE 1232 -544 1232 -592
WIRE 1072 -416 1072 -464
WIRE 1232 -416 1232 -464
WIRE -240 -32 -240 -64
WIRE -240 -32 -352 -32
WIRE -128 -32 -240 -32
WIRE -352 32 -352 -32
WIRE -128 32 -128 -32
WIRE 192 96 128 96
WIRE 224 96 192 96
WIRE 128 144 128 96
WIRE -352 160 -352 112
WIRE 96 160 -352 160
WIRE 320 176 160 176
WIRE -128 192 -128 112
WIRE 96 192 -128 192
WIRE -352 224 -352 160
WIRE -128 224 -128 192
WIRE 128 240 128 208
WIRE 192 240 128 240
WIRE 224 240 192 240
WIRE -1040 272 -1104 272
WIRE -880 272 -960 272
WIRE -720 272 -816 272
WIRE -624 272 -720 272
WIRE -480 272 -624 272
WIRE -416 272 -480 272
WIRE -16 272 -64 272
WIRE 32 272 -16 272
WIRE 320 272 320 176
WIRE 320 272 112 272
WIRE -720 304 -720 272
WIRE -624 304 -624 272
WIRE -1104 320 -1104 272
WIRE -480 336 -480 272
WIRE 880 336 720 336
WIRE 1024 336 944 336
WIRE 1056 336 1024 336
WIRE -16 352 -16 272
WIRE 80 352 -16 352
WIRE 320 352 320 272
WIRE 320 352 144 352
WIRE 384 352 320 352
WIRE 1056 368 1056 336
WIRE -352 384 -352 320
WIRE -240 384 -352 384
WIRE -128 384 -128 320
WIRE -128 384 -240 384
WIRE -16 384 -16 352
WIRE -720 400 -720 368
WIRE -624 400 -624 368
WIRE -240 416 -240 384
WIRE -1104 480 -1104 400
WIRE 256 480 144 480
WIRE 432 480 320 480
WIRE 464 480 432 480
WIRE 1056 480 1056 432
WIRE -720 496 -720 464
WIRE -624 496 -624 464
WIRE -480 496 -480 416
WIRE -16 512 -16 464
WIRE -240 528 -240 496
WIRE 144 528 144 480
WIRE 464 528 464 480
WIRE 720 528 720 336
WIRE 880 528 720 528
WIRE 1024 528 944 528
WIRE 1056 528 1024 528
WIRE 1056 544 1056 528
WIRE 1248 608 1248 512
WIRE 720 624 720 528
WIRE 144 656 144 608
WIRE 464 656 464 608
WIRE 1056 656 1056 608
WIRE -480 720 -480 688
WIRE 1248 720 1248 688
WIRE 720 736 720 704
WIRE -1952 784 -2096 784
WIRE -1360 784 -1696 784
WIRE -1360 832 -1360 784
WIRE -480 880 -480 800
WIRE -2096 944 -2096 784
WIRE -1824 944 -1824 880
WIRE -1360 960 -1360 912
WIRE -480 976 -480 944
WIRE -480 1072 -480 1040
WIRE -1824 1088 -1824 1024
WIRE -1360 1152 -1360 1120
WIRE -1824 1184 -1824 1088
WIRE -2096 1280 -2096 1024
WIRE -1952 1280 -2096 1280
WIRE -1360 1280 -1360 1232
WIRE -1360 1280 -1696 1280
FLAG 1104 -592 12V
FLAG 1264 -592 -15V
FLAG 1232 -416 0
FLAG 1072 -416 0
FLAG -240 -64 5V
FLAG -480 496 0
FLAG 1104 -832 5V
FLAG 1264 -832 -5V
FLAG 1232 -656 0
FLAG 1072 -656 0
FLAG 192 96 5V
FLAG 192 240 -5V
FLAG -1104 480 0
FLAG -624 496 0
FLAG -720 496 0
FLAG -16 512 0
FLAG 144 656 0
FLAG 464 656 0
FLAG -240 528 -5V
FLAG -480 1072 -5V
FLAG -480 688 12V
FLAG 384 352 20x_OUTPUT
IOPIN 384 352 Out
FLAG 720 736 0
FLAG 1056 480 0
FLAG 1056 656 0
FLAG 1024 336 max_1
FLAG 1024 528 min_1
FLAG 1248 720 0
FLAG 432 480 out_1
FLAG -1824 1088 0
FLAG -1360 960 0
FLAG -1360 1120 0
SYMBOL voltage 1072 -560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage 1232 -560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -15
SYMBOL voltage -1104 304 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value SINE(0 0.02m {f})
SYMBOL res -368 16 R0
SYMATTR InstName R10
SYMATTR Value {Rc}
SYMBOL res -112 16 M0
SYMATTR InstName R11
SYMATTR Value {Rc}
SYMBOL cap -816 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL res -944 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 50
SYMBOL res -496 320 R0
SYMATTR InstName R15
SYMATTR Value 50
SYMBOL res 128 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 1k
SYMBOL res -32 368 R0
SYMATTR InstName R25
SYMATTR Value 10
SYMBOL cap 144 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 5p
SYMBOL npn -416 224 R0
SYMATTR InstName Q5
SYMATTR Value 2N4401
SYMBOL npn -64 224 M0
SYMATTR InstName Q6
SYMATTR Value 2N4401
SYMBOL voltage 1232 -800 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -5
SYMBOL voltage 1072 -800 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL diode -640 400 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -640 304 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode -704 368 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode -704 464 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL bv 144 512 R0
SYMATTR InstName B1
SYMATTR Value V=V(20x_OUTPUT)
SYMBOL cap 320 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 10000
SYMBOL res 448 512 R0
SYMATTR InstName R3
SYMATTR Value 1m
SYMBOL diode -464 976 M0
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode -464 880 M0
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL res -464 704 M0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -256 400 R0
SYMATTR InstName R4
SYMATTR Value 1k5
SYMBOL ZZZ\\OpAmp\\AD8009an 128 176 R0
SYMATTR InstName U1
SYMBOL bv 720 608 R0
SYMATTR InstName B2
SYMATTR Value V=V(out_1)
SYMBOL diode 880 352 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value MyIdealDiode
SYMBOL cap 1040 368 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL diode 944 512 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMATTR Value MyIdealDiode
SYMBOL cap 1040 544 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL bv 1248 592 R0
SYMATTR InstName B3
SYMATTR Value V=V(max_1) - V(min_1)
SYMBOL ZZZ\\VolReg\\7805 -1824 784 R0
SYMATTR InstName U2
SYMBOL ZZZ\\VolReg\\7905 -1824 1280 M180
SYMATTR InstName U3
SYMBOL voltage -2096 928 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 15
SYMBOL res -1344 816 M0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL res -1344 1136 M0
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res -1808 928 M0
SYMATTR InstName R6
SYMATTR Value 1k
TEXT -1640 0 Left 2 !.lib Z:\\home\\ostoja\\Elektronika\\LNWBA\\LSK389B.lib
TEXT -1840 128 Left 2 !.tran 0 200u 0 10n
TEXT -1640 24 Left 2 !.lib Z:\\home\\ostoja\\Elektronika\\LNWBA\\lm7171.lib
TEXT -1640 48 Left 2 !.lib Z:\\home\\ostoja\\Elektronika\\LNWBA\\LM6171A.MOD
TEXT 560 -544 Left 2 !.param Trim = 100
TEXT 192 120 Left 2 ;40x
TEXT -464 248 Left 2 ;0.5x
TEXT -1824 160 Left 2 !;.step param f list 100k 1Meg 5Meg 9Meg 13Meg 17Meg 21Meg 25Meg
TEXT 672 232 Left 2 !.ic V(m1) = 0
TEXT 664 200 Left 2 !.model MyIdealDiode D(Ron=1 Roff=100Meg Vfwd=0 Vrev=20)
TEXT 280 -112 Left 2 !.param Rc = 2k2
TEXT -1936 312 Left 2 !.param f = 20Meg
